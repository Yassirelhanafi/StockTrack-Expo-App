{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,OAAO,mKAAA,CAAA,OAAkB;AAE/B,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mKAAA,CAAA,OAAkB;QACjB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8FACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG,mKAAA,CAAA,OAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,uYACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,mKAAA,CAAA,UAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,mIACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,mKAAA,CAAA,UAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,mKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 243, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/firebase/firestore.ts"],"sourcesContent":["import {\n  getFirestore,\n  collection,\n  addDoc,\n  getDocs,\n  updateDoc,\n  doc,\n  query,\n  where,\n  serverTimestamp,\n  Timestamp,\n  writeBatch,\n  getDoc,\n  setDoc,\n  orderBy,\n  limit,\n} from 'firebase/firestore';\nimport { getApps } from 'firebase/app';\n\n// Define Product Type\nexport interface Product {\n  id: string; // Firestore document ID or custom ID used in QR\n  name: string;\n  quantity: number;\n  consumptionRate?: {\n    amount: number;\n    unit: 'day' | 'week' | 'month';\n  };\n  lastUpdated: Timestamp | Date; // Use Timestamp for Firestore, Date for input/display\n  // Add a field to track last time quantity was decremented\n  lastDecremented?: Timestamp | Date;\n}\n\n// Define Notification Type\nexport interface Notification {\n    id: string; // Firestore document ID\n    productId: string;\n    productName: string;\n    quantity: number;\n    timestamp: Timestamp;\n    acknowledged?: boolean;\n}\n\nconst LOW_STOCK_THRESHOLD = 10;\n\n// Get Firestore instance (ensure initialized)\nconst getDb = () => {\n  if (!getApps().length) {\n    throw new Error('Firebase has not been initialized.');\n  }\n  return getFirestore();\n};\n\n// --- Product Functions ---\n\n// Add or Update a Product (using setDoc with merge option)\nexport const addProduct = async (productData: Omit<Product, 'lastUpdated' | 'lastDecremented'> & { lastUpdated: Date }) => {\n  const db = getDb();\n  const productRef = doc(db, 'products', productData.id); // Use custom ID from QR as document ID\n  try {\n    // Use setDoc with merge: true to create or update\n    await setDoc(productRef, {\n        ...productData,\n        lastUpdated: Timestamp.fromDate(productData.lastUpdated), // Convert Date to Timestamp\n        // Set lastDecremented only if consumptionRate exists, otherwise null/undefined\n        lastDecremented: productData.consumptionRate ? Timestamp.fromDate(productData.lastUpdated) : null\n    }, { merge: true });\n    console.log('Product added/updated successfully with ID:', productData.id);\n    return productData.id;\n  } catch (error) {\n    console.error('Error adding/updating product: ', error);\n    throw error;\n  }\n};\n\n\n// Get all products\nexport const getProducts = async (): Promise<Product[]> => {\n  const db = getDb();\n  const productsCol = collection(db, 'products');\n  const productSnapshot = await getDocs(productsCol);\n  const productList = productSnapshot.docs.map((doc) => ({\n    ...doc.data(),\n    id: doc.id, // Use Firestore document ID\n  })) as Product[];\n  return productList;\n};\n\n// Update product quantity (specific function)\nexport const updateProductQuantity = async (\n  productId: string,\n  newQuantity: number\n) => {\n  const db = getDb();\n  const productRef = doc(db, 'products', productId);\n  try {\n    await updateDoc(productRef, {\n      quantity: newQuantity,\n      lastUpdated: serverTimestamp(),\n    });\n    console.log('Product quantity updated successfully for ID:', productId);\n     await checkLowStock(productId); // Check stock level after update\n  } catch (error) {\n    console.error('Error updating product quantity: ', error);\n    throw error;\n  }\n};\n\n// --- Automatic Decrement Logic ---\n\nexport const decrementQuantities = async () => {\n  const db = getDb();\n  const productsRef = collection(db, 'products');\n  // Query for products with a consumption rate\n  const q = query(productsRef, where('consumptionRate', '!=', null));\n  const querySnapshot = await getDocs(q);\n  const batch = writeBatch(db);\n  const now = new Date();\n  const nowTimestamp = Timestamp.fromDate(now);\n  let updatesMade = 0;\n\n  console.log(`Running decrement check at ${now.toISOString()} for ${querySnapshot.docs.length} products with consumption rates.`);\n\n  querySnapshot.forEach((docSnap) => {\n    const product = { id: docSnap.id, ...docSnap.data() } as Product;\n    const rate = product.consumptionRate;\n    const lastDecrementedDate = product.lastDecremented\n      ? (product.lastDecremented as Timestamp).toDate() // Firestore Timestamps need conversion\n      : new Date(0); // If never decremented, assume long ago\n\n    if (!rate) return; // Should not happen due to query, but safe check\n\n    let periodsPassed = 0;\n    const diffTime = now.getTime() - lastDecrementedDate.getTime();\n    const diffDays = diffTime / (1000 * 60 * 60 * 24);\n\n    if (rate.unit === 'day') {\n        periodsPassed = Math.floor(diffDays);\n    } else if (rate.unit === 'week') {\n        periodsPassed = Math.floor(diffDays / 7);\n    } else if (rate.unit === 'month') {\n        // Approximation: using average days in month\n        periodsPassed = Math.floor(diffDays / 30.44);\n    }\n\n\n    if (periodsPassed > 0) {\n      const quantityToDecrement = periodsPassed * rate.amount;\n      const newQuantity = Math.max(0, product.quantity - quantityToDecrement); // Don't go below zero\n\n        if (newQuantity < product.quantity) {\n            console.log(`Decrementing ${product.name} (ID: ${product.id}) by ${quantityToDecrement} (${periodsPassed} ${rate.unit}(s) passed). Old Qty: ${product.quantity}, New Qty: ${newQuantity}`);\n            const productRef = doc(db, 'products', product.id);\n            batch.update(productRef, {\n                quantity: newQuantity,\n                lastDecremented: nowTimestamp, // Update last decremented time\n                lastUpdated: nowTimestamp, // Also update last general update time\n            });\n            updatesMade++;\n            // Check for low stock immediately after calculating new quantity\n             checkLowStock(product.id, newQuantity, product.name);\n        } else {\n            // console.log(`No decrement needed for ${product.name} (ID: ${product.id}) or quantity already 0. Periods passed: ${periodsPassed}`);\n             // Optionally update lastDecremented even if no change, to avoid re-checking immediately?\n            // batch.update(doc(db, 'products', product.id), { lastDecremented: nowTimestamp });\n        }\n    }\n  });\n\n  if (updatesMade > 0) {\n      try {\n          await batch.commit();\n          console.log(`${updatesMade} product quantities decremented successfully.`);\n      } catch (error) {\n          console.error('Error committing decrement batch: ', error);\n      }\n  } else {\n       console.log(\"No products needed decrementing in this run.\");\n  }\n};\n\n// --- Notification Logic ---\n\n// Check if product is low stock and add notification if needed\nexport const checkLowStock = async (productId: string, currentQuantity?: number, productName?: string) => {\n    const db = getDb();\n    const productRef = doc(db, 'products', productId);\n    const notificationRef = doc(db, 'notifications', productId); // Use product ID for notification ID\n\n    try {\n        let quantity: number;\n        let name: string;\n\n        if (currentQuantity === undefined || productName === undefined) {\n            const productSnap = await getDoc(productRef);\n            if (!productSnap.exists()) {\n                console.warn(`Product ${productId} not found during low stock check.`);\n                return;\n            }\n            const productData = productSnap.data() as Product;\n            quantity = productData.quantity;\n            name = productData.name;\n        } else {\n            quantity = currentQuantity;\n            name = productName;\n        }\n\n        if (quantity < LOW_STOCK_THRESHOLD) {\n            console.log(`Low stock detected for ${name} (ID: ${productId}), Quantity: ${quantity}. Creating notification.`);\n            // Create or update notification using setDoc\n            await setDoc(notificationRef, {\n                productId: productId,\n                productName: name,\n                quantity: quantity,\n                timestamp: serverTimestamp(),\n                acknowledged: false // Default to not acknowledged\n            }, { merge: true }); // Use merge to avoid overwriting acknowledged status if manually set later\n        } else {\n            // Optional: Delete notification if stock is replenished?\n            // This might be annoying if it fluctuates. Maybe just let them be acknowledged.\n             // console.log(`Stock level OK for ${name} (ID: ${productId}), Quantity: ${quantity}.`);\n            // Consider deleting only if acknowledged:\n             const notifSnap = await getDoc(notificationRef);\n             if (notifSnap.exists()) {\n                 // await deleteDoc(notificationRef); // Or mark as resolved instead of deleting?\n             }\n\n        }\n    } catch (error) {\n        console.error(`Error checking low stock for product ${productId}:`, error);\n    }\n};\n\n// Get active (not acknowledged) low stock notifications, ordered by time\nexport const getLowStockNotifications = async (): Promise<Notification[]> => {\n  const db = getDb();\n  const notificationsCol = collection(db, 'notifications');\n  // Query for notifications that are not acknowledged, order by most recent first\n  const q = query(notificationsCol, where('acknowledged', '==', false), orderBy('timestamp', 'desc'));\n  const notificationSnapshot = await getDocs(q);\n  const notificationList = notificationSnapshot.docs.map((doc) => ({\n    ...doc.data(),\n    id: doc.id, // Use Firestore document ID\n  })) as Notification[];\n  return notificationList;\n};\n\n\n// Function to acknowledge a notification (example)\nexport const acknowledgeNotification = async (notificationId: string) => {\n    const db = getDb();\n    const notificationRef = doc(db, 'notifications', notificationId);\n    try {\n        await updateDoc(notificationRef, {\n            acknowledged: true\n        });\n        console.log(`Notification ${notificationId} acknowledged.`);\n    } catch (error) {\n        console.error(`Error acknowledging notification ${notificationId}:`, error);\n    }\n}\n\n// --- Setup Automatic Decrement (Example: Call this from a server/cloud function or manually trigger) ---\n// Note: Directly running setInterval in a client-side Next.js app is generally not reliable\n// for background tasks. This should ideally be a Cloud Function triggered on a schedule (e.g., daily).\n\n// Example of how you *might* trigger it manually or from a less reliable client-side interval\n// DO NOT USE THIS IN PRODUCTION FOR RELIABLE DECREMENTS\nexport const setupClientSideDecrementInterval = (intervalMinutes: number = 60) => {\n    console.warn(\"Setting up client-side decrement interval. This is NOT recommended for production reliability. Use Cloud Functions instead.\");\n    const intervalId = setInterval(async () => {\n        console.log(`Client-side interval: Triggering decrementQuantities...`);\n        try {\n            await decrementQuantities();\n        } catch (error) {\n            console.error(\"Error during client-side decrement execution:\", error);\n        }\n    }, intervalMinutes * 60 * 1000);\n\n    // Return a cleanup function\n    return () => {\n        console.log(\"Clearing client-side decrement interval.\");\n        clearInterval(intervalId);\n    };\n};\n\n// If running in a Node.js environment (like a Cloud Function), you might do:\n// exports.scheduledDecrement = functions.pubsub.schedule('every 24 hours').onRun((context) => {\n//   console.log('Running scheduled quantity decrement function!');\n//   return decrementQuantities();\n// });\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 474, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 510, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,oKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 549, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 701, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/scan-tab.tsx"],"sourcesContent":["'use client';\n\nimport type { FC } from 'react';\nimport { useState, useEffect, useRef } from 'react';\nimport { Html5QrcodeScanner, Html5Qrcode } from 'html5-qrcode';\nimport type { Html5QrcodeResult, QrcodeError } from 'html5-qrcode';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { useToast } from '@/hooks/use-toast';\nimport { addProduct, updateProductQuantity } from '@/lib/firebase/firestore';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Camera, ScanLine, AlertTriangle } from 'lucide-react';\nimport { Input } from './ui/input';\nimport { Label } from './ui/label';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from '@/components/ui/alert-dialog';\n\nconst QR_REGION_ID = 'qr-code-full-region';\nconst CONSUMPTION_RATE_REGEX = /^(\\d+)\\s*(per|every|\\/)\\s*(day|week|month)$/i;\nconst LOW_STOCK_THRESHOLD = 10; // Define a threshold for low stock alerts\n\ninterface ProductData {\n  id: string; // Assuming QR code contains a product ID\n  name: string; // Assuming QR code contains a product name\n  quantity: number;\n  consumptionRate?: {\n    amount: number;\n    unit: 'day' | 'week' | 'month';\n  };\n}\n\nexport function ScanTab() {\n  const [scanResult, setScanResult] = useState<ProductData | null>(null);\n  const [isScanning, setIsScanning] = useState(false);\n  const [hasPermission, setHasPermission] = useState<boolean | null>(null);\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n  const { toast } = useToast();\n  const scannerRef = useRef<Html5Qrcode | null>(null);\n  const queryClient = useQueryClient();\n\n  const mutation = useMutation({\n    mutationFn: async (product: ProductData) => {\n      // Check if product exists logic would go here if we had getProduct\n      // For now, we assume we add or update directly\n      try {\n        await addProduct({\n          id: product.id,\n          name: product.name,\n          quantity: product.quantity,\n          consumptionRate: product.consumptionRate,\n          lastUpdated: new Date(), // Add lastUpdated timestamp\n        });\n        return product;\n      } catch (error: any) {\n        // A more robust check would involve checking if error code means 'already exists'\n        console.warn('Product might already exist, attempting update:', error);\n        await updateProductQuantity(product.id, product.quantity); // Example: Update if add fails\n        return product;\n      }\n    },\n    onSuccess: (data) => {\n      toast({\n        title: 'Success!',\n        description: `Product ${data.name} processed successfully.`,\n        variant: 'default',\n      });\n      queryClient.invalidateQueries({ queryKey: ['products'] }); // Invalidate product list cache\n      setScanResult(null); // Clear result after processing\n    },\n    onError: (error: any) => {\n      console.error('Error processing product:', error);\n      toast({\n        title: 'Error',\n        description: `Failed to process product. ${error.message}`,\n        variant: 'destructive',\n      });\n      setErrorMessage(`Failed to process product: ${error.message}`);\n    },\n  });\n\n  const parseConsumptionRate = (\n    rateString: string\n  ): ProductData['consumptionRate'] | undefined => {\n    const match = rateString.match(CONSUMPTION_RATE_REGEX);\n    if (match) {\n      const amount = parseInt(match[1], 10);\n      const unit = match[3].toLowerCase() as 'day' | 'week' | 'month';\n      if (!isNaN(amount) && ['day', 'week', 'month'].includes(unit)) {\n        return { amount, unit };\n      }\n    }\n    console.warn(`Could not parse consumption rate: \"${rateString}\"`);\n    return undefined;\n  };\n\n  const parseQRCodeData = (decodedText: string): ProductData | null => {\n    try {\n      // Attempt to parse as JSON first\n      const data = JSON.parse(decodedText);\n      if (data.id && data.name && typeof data.quantity === 'number') {\n        const product: ProductData = {\n          id: String(data.id),\n          name: String(data.name),\n          quantity: data.quantity,\n        };\n        if (data.consumptionRate) {\n          product.consumptionRate = parseConsumptionRate(data.consumptionRate);\n        }\n        return product;\n      }\n    } catch (e) {\n      // If JSON parsing fails, try a simple delimited format (e.g., \"ID:123,Name:Widget,Qty:50,Rate:5 per day\")\n      const parts = decodedText.split(',');\n      const product: Partial<ProductData> & { id: string; name: string } = {\n        id: '',\n        name: '',\n      }; // Required fields need defaults initially\n      let foundId = false,\n        foundName = false,\n        foundQty = false;\n\n      parts.forEach((part) => {\n        const [key, value] = part.split(':');\n        if (key && value) {\n          const trimmedKey = key.trim().toLowerCase();\n          const trimmedValue = value.trim();\n          if (trimmedKey === 'id') {\n            product.id = trimmedValue;\n            foundId = true;\n          } else if (trimmedKey === 'name') {\n            product.name = trimmedValue;\n            foundName = true;\n          } else if (trimmedKey === 'qty' || trimmedKey === 'quantity') {\n            const qty = parseInt(trimmedValue, 10);\n            if (!isNaN(qty)) {\n              product.quantity = qty;\n              foundQty = true;\n            }\n          } else if (trimmedKey === 'rate' || trimmedKey === 'consumptionrate') {\n            product.consumptionRate = parseConsumptionRate(trimmedValue);\n          }\n        }\n      });\n\n      if (foundId && foundName && foundQty) {\n        return product as ProductData;\n      }\n    }\n\n    console.error('Invalid QR code data format:', decodedText);\n    setErrorMessage(\n      'Invalid QR code format. Expected JSON or \"Key:Value,...\" format with id, name, and quantity.'\n    );\n    return null;\n  };\n\n  const onScanSuccess = (\n    decodedText: string,\n    decodedResult: Html5QrcodeResult\n  ) => {\n    console.log(`Code matched = ${decodedText}`, decodedResult);\n    const parsedData = parseQRCodeData(decodedText);\n    if (parsedData) {\n      setScanResult(parsedData);\n      setErrorMessage(null);\n    }\n    stopScan();\n  };\n\n  const onScanFailure = (error: QrcodeError | string) => {\n    // Ignore \"No QR code found\" errors unless persistent\n    if (typeof error === 'string' && error.includes('No QR code found')) {\n      // console.debug(`Code scan error = ${error}`);\n      return;\n    }\n    console.error(`Code scan error = ${error}`);\n    setErrorMessage('QR code scanning failed. Please try again.');\n    // Consider stopping scan on persistent errors\n  };\n\n  const startScan = async () => {\n    setScanResult(null);\n    setErrorMessage(null);\n\n    try {\n      // Check for camera permission (using navigator.mediaDevices)\n      await navigator.mediaDevices.getUserMedia({ video: true });\n      setHasPermission(true);\n\n      const html5QrCode = new Html5Qrcode(QR_REGION_ID);\n      scannerRef.current = html5QrCode;\n      setIsScanning(true);\n\n      html5QrCode\n        .start(\n          { facingMode: 'environment' }, // Prefer back camera\n          {\n            fps: 10, // Optional frame per seconds for qr code scanning\n            qrbox: { width: 250, height: 250 }, // Optional bounding box UI\n            aspectRatio: 1.0, // Optional aspect ratio for the video feed\n          },\n          onScanSuccess,\n          onScanFailure\n        )\n        .catch((err) => {\n          console.error('Error starting scanner:', err);\n          setErrorMessage(\n            `Could not start scanner: ${err.message}. Ensure camera access is allowed.`\n          );\n          setIsScanning(false);\n          setHasPermission(false);\n        });\n    } catch (err: any) {\n      console.error('Camera permission denied or error:', err);\n      setErrorMessage(\n        `Camera permission denied or error: ${err.message}. Please allow camera access in your browser settings.`\n      );\n      setHasPermission(false);\n      setIsScanning(false);\n    }\n  };\n\n  const stopScan = () => {\n    if (scannerRef.current && isScanning) {\n      scannerRef.current\n        .stop()\n        .then(() => {\n          setIsScanning(false);\n          scannerRef.current = null;\n          console.log('QR Code scanning stopped.');\n        })\n        .catch((err) => {\n          console.error('Error stopping the scanner:', err);\n          // Even if stopping fails, update state\n          setIsScanning(false);\n          scannerRef.current = null;\n        });\n    } else {\n      setIsScanning(false); // Ensure state is updated even if no scanner active\n    }\n  };\n\n  // Cleanup scanner on component unmount\n  useEffect(() => {\n    return () => {\n      stopScan();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleManualAdd = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    const formData = new FormData(event.currentTarget);\n    const id = formData.get('productId') as string;\n    const name = formData.get('productName') as string;\n    const quantity = parseInt(formData.get('quantity') as string, 10);\n    const consumptionRateStr = formData.get('consumptionRate') as string;\n\n    if (!id || !name || isNaN(quantity)) {\n        setErrorMessage(\"Please fill in Product ID, Name, and Quantity.\");\n        return;\n    }\n\n    const productData: ProductData = {\n        id,\n        name,\n        quantity,\n        consumptionRate: consumptionRateStr ? parseConsumptionRate(consumptionRateStr) : undefined,\n    };\n\n    setScanResult(productData); // Set result to trigger confirmation dialog\n  };\n\n\n  return (\n    <Card className=\"w-full shadow-md\">\n      <CardHeader>\n        <CardTitle className=\"text-center text-xl font-medium text-primary\">\n          Scan Product QR Code\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"flex flex-col items-center space-y-6\">\n        <div id={QR_REGION_ID} className=\"w-full md:w-[400px] h-[300px] border border-dashed border-secondary rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-muted-foreground\">\n          {isScanning ? (\n            <div className=\"animate-pulse\">Scanning...</div>\n          ) : (\n             <div className=\"text-center\">\n                <ScanLine size={48} className=\"mx-auto mb-2\" />\n                Scanner Ready\n            </div>\n          )}\n        </div>\n\n        {hasPermission === false && (\n          <p className=\"text-destructive text-center\">\n            <AlertTriangle className=\"inline mr-1\" size={16} />\n            Camera permission is required to scan QR codes. Please enable it in\n            your browser settings.\n          </p>\n        )}\n\n        {errorMessage && (\n          <p className=\"text-destructive text-center\">\n            <AlertTriangle className=\"inline mr-1\" size={16} />\n            {errorMessage}\n          </p>\n        )}\n\n        {!isScanning ? (\n          <Button onClick={startScan} disabled={hasPermission === false}>\n            <Camera className=\"mr-2 h-4 w-4\" /> Start Scanning\n          </Button>\n        ) : (\n          <Button onClick={stopScan} variant=\"outline\">\n            Stop Scanning\n          </Button>\n        )}\n\n        <AlertDialog open={!!scanResult} onOpenChange={(open) => !open && setScanResult(null)}>\n            <AlertDialogContent>\n                <AlertDialogHeader>\n                <AlertDialogTitle>Confirm Product Details</AlertDialogTitle>\n                <AlertDialogDescription>\n                    Please confirm the details scanned or entered:\n                    {scanResult && (\n                    <ul className=\"mt-4 list-disc list-inside space-y-1 bg-muted p-3 rounded-md\">\n                        <li><strong>ID:</strong> {scanResult.id}</li>\n                        <li><strong>Name:</strong> {scanResult.name}</li>\n                        <li><strong>Quantity:</strong> {scanResult.quantity}</li>\n                        {scanResult.consumptionRate && (\n                        <li>\n                            <strong>Consumption:</strong> {scanResult.consumptionRate.amount} per{' '}\n                            {scanResult.consumptionRate.unit}\n                        </li>\n                        )}\n                    </ul>\n                    )}\n                 </AlertDialogDescription>\n                 {scanResult && scanResult.quantity < LOW_STOCK_THRESHOLD && (\n                    <p className=\"text-accent font-semibold mt-2 flex items-center\">\n                        <AlertTriangle className=\"mr-2 h-5 w-5\" /> Low Stock Warning!\n                    </p>\n                 )}\n                </AlertDialogHeader>\n                <AlertDialogFooter>\n                <AlertDialogCancel onClick={() => setScanResult(null)}>Cancel</AlertDialogCancel>\n                <AlertDialogAction onClick={() => mutation.mutate(scanResult!)} disabled={mutation.isPending}>\n                    {mutation.isPending ? 'Processing...' : 'Confirm & Add/Update'}\n                </AlertDialogAction>\n                </AlertDialogFooter>\n            </AlertDialogContent>\n        </AlertDialog>\n\n        <div className=\"w-full border-t pt-6 mt-6\">\n             <h3 className=\"text-lg font-medium mb-4 text-center text-secondary\">Or Add Manually</h3>\n             <form onSubmit={handleManualAdd} className=\"space-y-4\">\n                <div>\n                    <Label htmlFor=\"productId\">Product ID</Label>\n                    <Input id=\"productId\" name=\"productId\" required />\n                </div>\n                 <div>\n                    <Label htmlFor=\"productName\">Product Name</Label>\n                    <Input id=\"productName\" name=\"productName\" required />\n                </div>\n                 <div>\n                    <Label htmlFor=\"quantity\">Quantity</Label>\n                    <Input id=\"quantity\" name=\"quantity\" type=\"number\" required />\n                </div>\n                <div>\n                    <Label htmlFor=\"consumptionRate\">Consumption Rate (e.g., \"5 per day\")</Label>\n                    <Input id=\"consumptionRate\" name=\"consumptionRate\" placeholder=\"Optional (e.g., 10 / week)\" />\n                     <p className=\"text-xs text-muted-foreground mt-1\">Format: [Number] per [day|week|month]</p>\n                </div>\n                 <Button type=\"submit\" className=\"w-full\">Add/Update Manually</Button>\n             </form>\n        </div>\n\n\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1420, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YACC,KAAK;YACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAM,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,mBAAmB;QAAa,GAAG,KAAK;;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,2DACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+EACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,oGACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,kDAAkD;QAC/D,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;;AAGb,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1558, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS","debugId":null}},
    {"offset": {"line": 1606, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf;KAVS","debugId":null}},
    {"offset": {"line": 1636, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/products-tab.tsx"],"sourcesContent":["'use client';\n\nimport { useQuery } from '@tanstack/react-query';\nimport { getProducts, type Product } from '@/lib/firebase/firestore';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { AlertTriangle, PackageSearch } from 'lucide-react';\n\nconst LOW_STOCK_THRESHOLD = 10; // Consistent threshold\n\nexport function ProductsTab() {\n  const { data: products, isLoading, error, refetch } = useQuery<Product[]>({\n    queryKey: ['products'],\n    queryFn: getProducts,\n    staleTime: 5 * 60 * 1000, // Cache for 5 minutes\n    refetchInterval: 60 * 1000 // Refetch every minute to keep data fresh-ish\n  });\n\n  const formatConsumptionRate = (rate: Product['consumptionRate']) => {\n    if (!rate) return 'N/A';\n    return `${rate.amount} / ${rate.unit}`;\n  };\n\n  return (\n    <Card className=\"w-full shadow-md\">\n      <CardHeader>\n        <CardTitle className=\"text-xl font-medium text-primary\">\n          Product Inventory\n        </CardTitle>\n        <CardDescription>\n          Current stock levels and consumption rates. Quantities are updated automatically.\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        {isLoading && (\n          <div className=\"space-y-4\">\n             {[...Array(3)].map((_, i) => (\n              <div key={i} className=\"flex items-center space-x-4 p-4 border rounded-md\">\n                <Skeleton className=\"h-8 w-8 rounded-full\" />\n                <div className=\"space-y-2 flex-1\">\n                  <Skeleton className=\"h-4 w-3/4\" />\n                  <Skeleton className=\"h-4 w-1/2\" />\n                </div>\n                 <Skeleton className=\"h-6 w-16\" />\n              </div>\n            ))}\n          </div>\n        )}\n        {error && (\n          <div className=\"text-destructive text-center p-6 bg-destructive/10 rounded-md\">\n             <AlertTriangle className=\"mx-auto h-8 w-8 mb-2\" />\n            <p>Error loading products: {(error as Error).message}</p>\n            <button onClick={() => refetch()} className=\"mt-4 text-sm underline\">Try again</button>\n          </div>\n        )}\n        {!isLoading && !error && products && products.length === 0 && (\n           <div className=\"text-center p-10 text-muted-foreground\">\n              <PackageSearch className=\"mx-auto h-12 w-12 mb-4\" />\n              <p className=\"text-lg font-medium\">No products found.</p>\n              <p>Scan a QR code or add a product manually to get started.</p>\n            </div>\n        )}\n        {!isLoading && !error && products && products.length > 0 && (\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Name</TableHead>\n                <TableHead className=\"text-right\">Quantity</TableHead>\n                <TableHead>Consumption Rate</TableHead>\n                 <TableHead>Last Updated</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {products.map((product) => (\n                <TableRow key={product.id}>\n                  <TableCell className=\"font-medium\">{product.name}</TableCell>\n                  <TableCell className=\"text-right\">\n                    {product.quantity < LOW_STOCK_THRESHOLD ? (\n                       <Badge variant=\"destructive\">{product.quantity}</Badge>\n                    ) : (\n                       <Badge variant=\"secondary\">{product.quantity}</Badge>\n                    )}\n                  </TableCell>\n                  <TableCell>{formatConsumptionRate(product.consumptionRate)}</TableCell>\n                   <TableCell className=\"text-muted-foreground text-xs\">\n                     {product.lastUpdated ? new Date(product.lastUpdated.seconds * 1000).toLocaleString() : 'N/A'}\n                   </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1962, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,6LAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2039, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/notifications-tab.tsx"],"sourcesContent":["'use client';\n\nimport { useQuery } from '@tanstack/react-query';\nimport { getLowStockNotifications, type Notification } from '@/lib/firebase/firestore'; // Assuming a function to get notifications\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { AlertTriangle, BellRing, BellOff } from 'lucide-react';\n\nexport function NotificationsTab() {\n  const { data: notifications, isLoading, error, refetch } = useQuery<Notification[]>({\n    queryKey: ['notifications'],\n    queryFn: getLowStockNotifications, // Use the specific function\n    staleTime: 60 * 1000, // Cache for 1 minute\n    refetchInterval: 2 * 60 * 1000 // Refetch every 2 minutes\n  });\n\n  return (\n    <Card className=\"w-full shadow-md\">\n      <CardHeader>\n        <CardTitle className=\"text-xl font-medium text-accent flex items-center\">\n          <BellRing className=\"mr-2 h-5 w-5\" />\n          Low Stock Alerts\n        </CardTitle>\n        <CardDescription>\n          Products that require your attention and need restocking.\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {isLoading && (\n           <div className=\"space-y-4\">\n             {[...Array(2)].map((_, i) => (\n                <div key={i} className=\"flex items-start space-x-3 p-4 border rounded-md\">\n                    <Skeleton className=\"h-5 w-5 mt-1 rounded-full bg-accent/50\" />\n                    <div className=\"space-y-1 flex-1\">\n                    <Skeleton className=\"h-4 w-3/4\" />\n                    <Skeleton className=\"h-3 w-1/2\" />\n                    </div>\n                </div>\n             ))}\n           </div>\n        )}\n        {error && (\n           <div className=\"text-destructive text-center p-6 bg-destructive/10 rounded-md\">\n             <AlertTriangle className=\"mx-auto h-8 w-8 mb-2\" />\n            <p>Error loading notifications: {(error as Error).message}</p>\n            <button onClick={() => refetch()} className=\"mt-4 text-sm underline\">Try again</button>\n          </div>\n        )}\n        {!isLoading && !error && notifications && notifications.length === 0 && (\n          <div className=\"text-center p-10 text-muted-foreground\">\n             <BellOff className=\"mx-auto h-12 w-12 mb-4\" />\n            <p className=\"text-lg font-medium\">All Clear!</p>\n            <p>No low stock notifications at the moment.</p>\n          </div>\n        )}\n        {!isLoading && !error && notifications && notifications.length > 0 && (\n          notifications.map((notification) => (\n            <Alert key={notification.id} variant=\"destructive\" className=\"border-accent bg-accent/10 text-accent-foreground dark:text-accent\">\n              <AlertTriangle className=\"h-4 w-4 text-accent\" />\n              <AlertTitle className=\"font-semibold text-accent\">Low Stock: {notification.productName}</AlertTitle>\n              <AlertDescription className=\"text-accent/90\">\n                Quantity dropped to {notification.quantity}. Please reorder soon. (ID: {notification.productId})\n                <span className=\"block text-xs mt-1 text-accent/70\">\n                  Triggered on: {new Date(notification.timestamp.seconds * 1000).toLocaleString()}\n                </span>\n              </AlertDescription>\n            </Alert>\n          ))\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA,2OAAwF,2CAA2C;AACnI;AAOA;AACA;AACA;AAAA;AAAA;;;AAbA;;;;;;;AAeO,SAAS;;IACd,MAAM,EAAE,MAAM,aAAa,EAAE,SAAS,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,8KAAA,CAAA,WAAQ,AAAD,EAAkB;QAClF,UAAU;YAAC;SAAgB;QAC3B,SAAS,sIAAA,CAAA,2BAAwB;QACjC,WAAW,KAAK;QAChB,iBAAiB,IAAI,KAAK,KAAK,0BAA0B;IAC3D;IAEA,qBACE,6LAAC,mIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,6LAAC,mIAAA,CAAA,aAAU;;kCACT,6LAAC,mIAAA,CAAA,YAAS;wBAAC,WAAU;;0CACnB,6LAAC,iNAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;4BAAiB;;;;;;;kCAGvC,6LAAC,mIAAA,CAAA,kBAAe;kCAAC;;;;;;;;;;;;0BAInB,6LAAC,mIAAA,CAAA,cAAW;gBAAC,WAAU;;oBACpB,2BACE,6LAAC;wBAAI,WAAU;kCACZ;+BAAI,MAAM;yBAAG,CAAC,GAAG,CAAC,CAAC,GAAG,kBACpB,6LAAC;gCAAY,WAAU;;kDACnB,6LAAC,uIAAA,CAAA,WAAQ;wCAAC,WAAU;;;;;;kDACpB,6LAAC;wCAAI,WAAU;;0DACf,6LAAC,uIAAA,CAAA,WAAQ;gDAAC,WAAU;;;;;;0DACpB,6LAAC,uIAAA,CAAA,WAAQ;gDAAC,WAAU;;;;;;;;;;;;;+BAJd;;;;;;;;;;oBAUjB,uBACE,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,2NAAA,CAAA,gBAAa;gCAAC,WAAU;;;;;;0CAC1B,6LAAC;;oCAAE;oCAA+B,MAAgB,OAAO;;;;;;;0CACzD,6LAAC;gCAAO,SAAS,IAAM;gCAAW,WAAU;0CAAyB;;;;;;;;;;;;oBAGxE,CAAC,aAAa,CAAC,SAAS,iBAAiB,cAAc,MAAM,KAAK,mBACjE,6LAAC;wBAAI,WAAU;;0CACZ,6LAAC,+MAAA,CAAA,UAAO;gCAAC,WAAU;;;;;;0CACpB,6LAAC;gCAAE,WAAU;0CAAsB;;;;;;0CACnC,6LAAC;0CAAE;;;;;;;;;;;;oBAGN,CAAC,aAAa,CAAC,SAAS,iBAAiB,cAAc,MAAM,GAAG,KAC/D,cAAc,GAAG,CAAC,CAAC,6BACjB,6LAAC,oIAAA,CAAA,QAAK;4BAAuB,SAAQ;4BAAc,WAAU;;8CAC3D,6LAAC,2NAAA,CAAA,gBAAa;oCAAC,WAAU;;;;;;8CACzB,6LAAC,oIAAA,CAAA,aAAU;oCAAC,WAAU;;wCAA4B;wCAAY,aAAa,WAAW;;;;;;;8CACtF,6LAAC,oIAAA,CAAA,mBAAgB;oCAAC,WAAU;;wCAAiB;wCACtB,aAAa,QAAQ;wCAAC;wCAA6B,aAAa,SAAS;wCAAC;sDAC/F,6LAAC;4CAAK,WAAU;;gDAAoC;gDACnC,IAAI,KAAK,aAAa,SAAS,CAAC,OAAO,GAAG,MAAM,cAAc;;;;;;;;;;;;;;2BANvE,aAAa,EAAE;;;;;;;;;;;;;;;;;AAevC;GAhEgB;;QAC6C,8KAAA,CAAA,WAAQ;;;KADrD","debugId":null}},
    {"offset": {"line": 2305, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/app-shell.tsx"],"sourcesContent":["'use client';\n\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { ScanTab } from '@/components/scan-tab';\nimport { ProductsTab } from '@/components/products-tab';\nimport { NotificationsTab } from '@/components/notifications-tab';\nimport { QrCode, List, Bell } from 'lucide-react';\n\nexport function AppShell() {\n  return (\n    <div className=\"flex min-h-screen w-full flex-col items-center bg-muted/40 p-4 md:p-8\">\n      <div className=\"w-full max-w-4xl\">\n        <h1 className=\"text-3xl font-semibold mb-6 text-center text-primary\">\n          StockTrack\n        </h1>\n        <Tabs defaultValue=\"scan\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-3 mb-6\">\n            <TabsTrigger value=\"scan\">\n              <QrCode className=\"mr-2 h-4 w-4\" />\n              Scan\n            </TabsTrigger>\n            <TabsTrigger value=\"products\">\n              <List className=\"mr-2 h-4 w-4\" />\n              Products\n            </TabsTrigger>\n            <TabsTrigger value=\"notifications\">\n              <Bell className=\"mr-2 h-4 w-4\" />\n              Notifications\n            </TabsTrigger>\n          </TabsList>\n          <TabsContent value=\"scan\">\n            <ScanTab />\n          </TabsContent>\n          <TabsContent value=\"products\">\n            <ProductsTab />\n          </TabsContent>\n          <TabsContent value=\"notifications\">\n            <NotificationsTab />\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AANA;;;;;;;AAQO,SAAS;IACd,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAuD;;;;;;8BAGrE,6LAAC,mIAAA,CAAA,OAAI;oBAAC,cAAa;oBAAO,WAAU;;sCAClC,6LAAC,mIAAA,CAAA,WAAQ;4BAAC,WAAU;;8CAClB,6LAAC,mIAAA,CAAA,cAAW;oCAAC,OAAM;;sDACjB,6LAAC,6MAAA,CAAA,SAAM;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;8CAGrC,6LAAC,mIAAA,CAAA,cAAW;oCAAC,OAAM;;sDACjB,6LAAC,qMAAA,CAAA,OAAI;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;8CAGnC,6LAAC,mIAAA,CAAA,cAAW;oCAAC,OAAM;;sDACjB,6LAAC,qMAAA,CAAA,OAAI;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;;;;;;;sCAIrC,6LAAC,mIAAA,CAAA,cAAW;4BAAC,OAAM;sCACjB,cAAA,6LAAC,oIAAA,CAAA,UAAO;;;;;;;;;;sCAEV,6LAAC,mIAAA,CAAA,cAAW;4BAAC,OAAM;sCACjB,cAAA,6LAAC,wIAAA,CAAA,cAAW;;;;;;;;;;sCAEd,6LAAC,mIAAA,CAAA,cAAW;4BAAC,OAAM;sCACjB,cAAA,6LAAC,6IAAA,CAAA,mBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM7B;KAnCgB","debugId":null}}]
}